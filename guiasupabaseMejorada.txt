

üìò GU√çA COMPLETA: CONFIGURACI√ìN DE SUPABASE PARA HELPDESK PRO
  
üéØ OBJETIVO

Configurar un proyecto Supabase listo para:

    Autenticaci√≥n de usuarios (email/password)
    Almacenamiento seguro de datos (tickets, perfiles, etc.)
    Integraci√≥n con React + Vite
    Cumplir con Row Level Security (RLS) desde el inicio

‚úÖ CHECKLIST PREVIO
    Tener cuenta de GitHub o email v√°lido
    Proyecto React con Vite funcionando en http://localhost:5173 
    Editor de c√≥digo (VS Code recomendado)


üîê PASO 1: CREAR CUENTA EN SUPABASE

    1.1 Registro
        Ir a https://supabase.com
        Click en "Start your project" (esquina superior derecha)

    1.2 M√©todo de registro
        ‚úÖ Recomendado: GitHub (m√°s r√°pido, sin gesti√≥n de contrase√±as)
        Click en "Continue with GitHub"
        Autoriza la app ‚Üí ¬°listo en segundos!

    Alternativa: Email
        Ingresa email y contrase√±a segura
        Verifica tu correo (revisa spam)

    üí° Consejo para estudiantes: Usar GitHub evita problemas de "olvido de contrase√±a" en entornos de aprendizaje.


üöÄ PASO 2: CREAR PROYECTO

    2.1 Configuraci√≥n del proyecto
        Click en "New Project"

        Completa:
        ---------------------------------------------------------------------------------------
        Campo                       Valor sugerido                  Notas
        ---------------------------------------------------------------------------------------
        Name                        helpdeskb                       Nombre √∫nico, sin espacios
        Database Password           jHfDmU9xxxxxxx                  ¬°GU√ÅRDALA EN UN LUGAR SEGURO! Es la contrase√±a del superusuario postgres.
        Region                      South America (S√£o Paulo)       Ideal para LATAM
        Plan                        Free                            Suficiente para desarrollo

        ‚ö†Ô∏è Importante: La contrase√±a de la base de datos NO es la misma que la clave API. No se usa en el frontend.


üîë PASO 3: OBTENER CREDENCIALES DE API

        3.1 Acceder a Settings ‚Üí API
            En el panel izquierdo: Settings (‚öôÔ∏è) ‚Üí API
            Copia estos dos valores:
                Project URL ‚Üí https://xxxxxxxxxxxx.supabase.co
                anon public key ‚Üí eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

            3.2 Crear archivo .env.local
            En la ra√≠z de tu proyecto React/Vite:

                # .env.local
                VITE_SUPABASE_URL=https://xxxxxxxxxxxx.supabase.co
                VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

    ‚úÖ Reglas obligatorias:
        .- El archivo debe llamarse .env.local (no .env)
        .- Las variables deben empezar con VITE_ (para que Vite las exponga al frontend)
        .- Sin comillas, sin espacios alrededor del =
        .- Nunca commitear este archivo ‚Üí a√±adir a .gitignore


üë§ PASO 4: CONFIGURAR AUTENTICACI√ìN

        4.1 Habilitar Email/Password
            Panel izquierdo ‚Üí Authentication ‚Üí Providers
            En Email:
                ‚úÖ Enable email sign-in
                ‚ùå Disable "Confirm email" (solo para desarrollo)
                ‚ö†Ô∏è En producci√≥n, SIEMPRE activar confirmaci√≥n de email.

        4.2 Configurar URLs de redirecci√≥n (¬°CR√çTICO!)
            Ir a Authentication ‚Üí URL Configuration
            Configurar:

        ------------------------------------------------------------------
        Campo                           Valor
        ------------------------------------------------------------------
        Site URL                        http://localhost:5173

        Additional Redirect URLs        http://localhost:5173/login
                                        http://localhost:5173/register
                                        http://localhost:5173/dashboard
                                        http://localhost:5173

        üí° Si usas otro puerto (ej. 3000), ajusta todas las URLs.


üêò PASO 5: CREAR LA BASE DE DATOS

    ‚ö†Ô∏è Antes de ejecutar SQL: aseg√∫rate de tener el script basededatos.txt listo con:
        Tabla profiles (con trigger para crear perfil al registrarse)
        Tabla tickets
        Relaciones y pol√≠ticas RLS

    5.1 Abrir SQL Editor
        Panel izquierdo ‚Üí SQL Editor ‚Üí New Query (basededatos.tx)
        Pegar y ejecutar el script completo

        Click en ‚ñ∂ Run
            Esperar mensaje "Success"
            Ir a Table Editor ‚Üí deben aparecer: las 5 tablas que estan en basededatos.txt



üß™ PASO 6: PRUEBAS INICIALES

        6.1 Crear usuario de prueba
            Authentication ‚Üí Users ‚Üí Add User

            Completar:
                Email: estudiante@helpdesk.com
                Password: estudiante123

                Click en Create User

6.2 Verificar en la base de datos

    Ejecuta en SQL Editor:
    -- Ver usuarios en auth
    SELECT id, email FROM auth.users ORDER BY created_at DESC LIMIT 1;

    -- Ver perfil creado autom√°ticamente
    SELECT id, email, role FROM profiles ORDER BY created_at DESC LIMIT 1;

    ‚úÖ Debes ver el mismo id en ambas consultas ‚Üí ¬°el trigger funcion√≥!



üõ°Ô∏è PASO 7 (OPCIONAL PERO RECOMENDADO): PROBAR RLS

        Ejecuta esta consulta sin estar autenticado (en SQL Editor):
        SELECT * FROM tickets;